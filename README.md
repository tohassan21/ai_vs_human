# **AI vs Human classification**
## **Project 4**: AI Generated vs Human Image Detection

## **Table of Contents**
- [**ai\_vs\_human**](#ai_vs_human)
  - [**Project 4**: AI Generated vs Human Image Detection](#project-4-ai-generated-vs-human-image-detection)
  - [**Table of Contents**](#table-of-contents)
  - [**Objective**](#objective)
  - [**Team Members**](#team-members)
  - [**Dataset**](#dataset)
  - [**Technologies / Dependencies Needed and Used**](#technologies--dependencies-needed-and-used)
  - [**Installation**](#installation)
  - [**Visualizations**](#visualizations)
  - [**Sources**](#sources)
  - [**Links**](#links)
  - [**License**](#license)
  

## **Objective**
This project aims to build a supervised learning model that can identify whether an image was generated by artificial intelligence or created by a human. We use a dataset from Kaggle and deployed our model using Flask.


## **Team Members**

- Jacob
- Lannon
- Matt
- Maxwell
- Toka
- Toni

## **Dataset**

We're using [datasets/alessandrasala79/ai-vs-human-generated-dataset](https://www.kaggle.com/datasets/alessandrasala79/ai-vs-human-generated-dataset?resource=download) from Kaggle, which contains AI-generated images and human-created images

Due to size limitations, the dataset is not stored directly in this repository. See the "Installation" section for instructions on how to obtain and set up the dataset

## **Technologies / Dependencies Needed and Used**
- **Python**: 3.10.15 - The programming language used for the project.
- **matplotlib**: A popular Python library for creating static, animated, and interactive visualizations. Used for plotting graphs, charts, and **visualizing model performance** in the project.

- **pandas**:  A powerful data analysis and manipulation library. Used for handling, cleaning, and transforming datasets efficiently.
- **os**: A built-in Python module for interacting with the operating system. Used for file and directory operations, such as reading and managing paths.
- **numpy**: A fundamental package for numerical computing in Python. Used for handling arrays, mathematical operations, and efficient data processing. **(Version: 1.26.4)**
- **TensorFlow/Keras**: A deep learning framework used for building and training convolutional neural networks (CNNs). Includes modules for model architecture (Sequential, models), layers (Conv2D, MaxPooling2D, Flatten, Dense), dataset handling (image_dataset_from_directory), and pretrained models (Xception for transfer learning). **(Version: 2.19.0)**
- **Flask**: A lightweight web framework in Python used for creating web applications and APIs. In deep learning projects, it's often used to build RESTful APIs for serving trained models, handling image uploads, and returning predictions to users through a web interface. **(Version: 3.0.3)**
- **gunicorn**: A Python WSGI HTTP server for UNIX. It's used to serve Flask applications in a production environment, providing better performance and scalability compared to the built-in Flask server. **(Version: 23.0.0)**
- **pillow**: A Python Imaging Library (PIL) fork that adds image processing capabilities to your Python interpreter. Used for opening, manipulating, and saving various image file formats, particularly useful for preprocessing images before feeding them into a model. **(Version: 10.4.0)**
- **boto3**: The Amazon Web Services (AWS) SDK for Python. It allows Python developers to write software that makes use of services like Amazon S3 and Amazon SageMaker, facilitating data storage and model deployment. **(Version: 1.34.71)**
- **python-dotenv**: A library that reads key-value pairs from a .env file and adds them to the environment variables. This is useful for managing configuration settings, such as API keys or database URLs, without hardcoding them into your application. **(Version: 1.0.1)**
- **werkzeug**: A comprehensive WSGI web application library. It is used by Flask and provides utilities for building web applications, including request and response handling, routing, and debugging. **(Version: 3.0.3)**
- **AWS S3**: Amazon Web Services' Simple Storage Service (S3) is used for storing and retrieving large amounts of static files, such as images, videos, or dataset backups. It integrates with your app to manage media or file uploads.
- **HEROKU**: A cloud platform for deploying and managing applications. It supports multiple programming languages and simplifies deployment pipelines, scaling, and configuration via CLI or dashboard.


## **Installation**
1. Clone the repository
2. Download the entire data file from [datasets/alessandrasala79/ai-vs-human-generated-dataset](https://www.kaggle.com/datasets/alessandrasala79/ai-vs-human-generated-dataset?resource=download)
3. Create a Resources folder
    - Upload the test.csv and train.csv here
    - Upload the train_data folder here and rename it to TrainingImages
4. Run the image_classifier.ipynb (This will take a few hours)
5. Use the model_03.h5 model to test the data
6. To test user images go to [User Flask Interface ](https://app-flask-xception-7d7b178928d0.herokuapp.com/)

# Flask Deployment Instructions
This repository contains a Flask application that classifies images as either "Human-generated" or "AI-generated" using a pre-trained TensorFlow model. The app is designed to work in both local and Heroku environments.
## Installation

### 1. **Clone the Repository (Skip this step if you already cloned the repo)**
   Open a terminal in VS Code and run:
   ```bash
   git clone https://github.com/tohassan21/ai_vs_human.git
   cd ai_vs_human
**### 2. (Optional) Create and Activate a Virtual Environment**
It’s recommended to use a virtual environment to manage your Python dependencies. You can create and activate one using the following commands:
```bash
python -m venv venv
# On Windows:
venv\Scripts\activate
# On macOS/Linux:
source venv/bin/activate
**### 3. Install Dependencies**
Run the following command to install all required packages:
```bash
pip install -r requirements.txt
This command will install only the packages listed in the requirements.txt file. Any other packages not mentioned won't be installed unless they are added to that file.

****## Environmental Setup****
The application relies on AWS credentials and S3 configuration to download the model file.
**### 1. Create a .env File**
Create a file named `.env` in the project root. You can start by copying the provided sample file:
```bash
cd flask_app
cp .env.dummy.example .env
Ensure that your application is configured to load the environment variables from the correct location.
**### 2. Configure the Environment Variables**
Open the `.env` file and fill in the values as needed. For example:
```dotenv
# AWS credentials and S3 configuration
AWS_ACCESS_KEY_ID=your_access_key_here
AWS_SECRET_ACCESS_KEY=your_secret_key_here
S3_BUCKET_NAME=your_bucket_name_here
# If you do not have AWS credentials for local testing, you can leave the S3_BUCKET_NAME empty or use a dummy value:
# S3_BUCKET_NAME=dummy
If you use dummy values (or leave S3_BUCKET_NAME empty), the application will skip the S3 download and load the model from a local file instead.

**## Running the Application Locally**
**### 1. Ensure the Model File is Available**
- **With Valid AWS Credentials:**  
  The app will download the model automatically from S3.
- **Without AWS Credentials:**  
  Manually place your model file (`model_05.h5`) into the `tmp` folder at the project root:
    ```bash
  ai_vs_human/tmp/model_05.h5

**### 2. Start the Flask Application**
Open a terminal in (ensuring you’re in the project root) and run:
python flask_app/app.py
The app should start in debug mode and be accessible at http://localhost:5000.


**## Deploying on Heroku**
**### 1. Ensure Your Procfile is Set Up**
Your `Procfile` should have the following line:
```plaintext
web: gunicorn flask_app.app:app

**### 2. Deploy to Heroku**
Follow these steps in your terminal:
heroku create
git push heroku main

**### 3. Set Environment Variables on Heroku**
If you have AWS credentials, use the Heroku CLI or dashboard to set them:
```bash
heroku config:set AWS_ACCESS_KEY_ID=your_access_key_here
heroku config:set AWS_SECRET_ACCESS_KEY=your_secret_key_here
heroku config:set S3_BUCKET_NAME=your_bucket_name_here

If you don't have AWS credentials or don't want to use them for local testing or deployment, you can set S3_BUCKET_NAME to a dummy value. For example:
heroku config:set S3_BUCKET_NAME=dummy
When S3_BUCKET_NAME is empty or set to a dummy value, the application will skip downloading the model from S3 and will use the local model file instead.
****### 4. Access Your App****
Your app will be available at the URL provided by Heroku.

**### Usage**
**### 1. Open the Application in Your Browser**
- **Locally:** [http://localhost:5000](http://localhost:5000)
- **On Heroku:** Use your Heroku app’s URL

**### 2. Upload an Image**
Click **"Select an image"** to choose a square-shaped image for best results, then click **"Upload and Predict"**.

**### 3. View the Prediction**
The app will display the predicted label (either **"Human-generated"** or **"AI-generated"**) along with the confidence percentage.


## **Visualizations**
<img src="Images/Flask_app.png" width="500" />  

**Figure 1:** Screenshot of the Flask web interface used for image upload and prediction.  
<hr style="border: 2px solid #4FA3D1; width: 100%; margin: auto;">
<br><br>

<img src="Images/AI_images/0a79f72b0fa044eb855856a4b91bfeab.jpg" width="500" />  

**Figure 2:** Known AI image 1  
<hr style="border: 2px solid #4FA3D1; width: 100%; margin: auto;">
<br><br>

<img src="Images/AI_images/ffdc4dff2a6f47638a0541651649dcf7.jpg" width="500" />  

**Figure 3:** Known AI image 2
<hr style="border: 2px solid #4FA3D1; width: 100%; margin: auto;">
<br><br>

<img src="Images/Human_Images/0a0cb4cf26d7426ca6ab81fe427bd922.jpg" width="500" />  

**Figure 4:** Known Human image 1
<hr style="border: 2px solid #4FA3D1; width: 100%; margin: auto;">
<br><br> 

<img src="Images/Human_Images/0a0f49fd5af340628e76b5c96a734c49.jpg" width="500" />  

**Figure 5:** Known Human image 2
<hr style="border: 2px solid #4FA3D1; width: 100%; margin: auto;">
<br><br>

---

## **Sources**
- [Kaggle ai-vs-human-generated-dataset](https://www.kaggle.com/datasets/alessandrasala79/ai-vs-human-generated-dataset?resource=download) 
- Office Hours
- Documentation from [**Technologies / Dependencies Needed and Used**](#technologies--dependencies-needed-and-used)
- Tutor Sessions
- Xpert Learning Assistant
- ChatGPT
- Google

---

## **Links**
[User Flask Interface 📡](https://app-flask-xception-7d7b178928d0.herokuapp.com/)  
[matplotlib](https://matplotlib.org/)  
[pandas](https://pandas.pydata.org/)  
[numpy](https://numpy.org/doc/stable/user/quickstart.html)  
[TensorFlow/Keras](https://www.tensorflow.org/guide/keras)  
[Flask](https://flask.palletsprojects.com/en/stable/)  
[AWS S3](https://aws.amazon.com/s3/)  
[HEROKU](https://www.heroku.com/)  
[Lannon's addition](../Lannon%20Low-Tech%20README.md)

---
## **License**
-  [GNU GENERAL PUBLIC LICENSE Version 3, 29 June 2007](./LICENSE) - see the LICENSE file for details here.
 
![License](https://img.shields.io/badge/license-GPL%203-blue)

